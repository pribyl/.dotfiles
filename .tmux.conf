# Bindings {Ú{{
# Remap prefix
unbind C-b
set -g prefix C-Space
# Quick key for moving back to the previous window
bind-key L last-window
# Fix issue with tmux repeating -r the arrow directions (meaning when you switch panes you can accidentally jump back to the other pane again)
bind-key Up select-pane -U
bind-key Down select-pane -D
bind-key Left select-pane -L
bind-key Right select-pane -R
# Make splitting windows easier
bind-key v split-window -h -c "#{pane_current_path}"
bind-key s split-window -v -c "#{pane_current_path}"
# Reload tmux config
# Same as in command mode :source-file ~/tmux.conf
# Or outside of tmux with `tmux source-file ~/tmux.conf`
bind-key r source-file ~/.tmux.conf \; display-message "Config reloaded..."
# Allow Ctrl+k to clear the history
bind-key -n C-k clear-history
# Make resizing panes easier
bind-key < resize-pane -L 5
bind-key > resize-pane -R 5
bind-key + resize-pane -U 5
bind-key - resize-pane -D 5
bind-key = select-layout even-vertical
bind-key | select-layout even-horizontal
# Copy mode
bind-key -n S-Up copy-mode -u
# }}}
# Settings {{{
# Ensure terminal starts with its own colour scheme (defined below)
set -g default-terminal "screen-256color"
# tmux >= 2.2 handles utf8 automatically
# (from powerline)
run-shell "tmux set-environment -g TMUX_VERSION_MAJOR $(tmux -V | cut -d' ' -f2 | cut -d'.' -f1 | sed 's/[^0-9]*//g')"
run-shell "tmux set-environment -g TMUX_VERSION_MINOR $(tmux -V | cut -d' ' -f2 | cut -d'.' -f2 | sed 's/[^0-9]*//g')"
if-shell '[[ ! ( $TMUX_VERSION_MAJOR -eq 2 && $TMUX_VERSION_MINOR -ge 2 ) ]]' \
  'set-window-option -g utf8 on ; set -g status-utf8 on'
# Note: if you have EDITOR=vim set
# then the following two settings aren't needed
# Use Vi style key bindings to move around command line mode
set-option -g status-keys vi
# Use Vi style key bindings to move around copy mode
setw -g mode-keys vi
# Remove delay when pressing esc in Vim
set -sg escape-time 0
# Prevent tmux from renaming the tab when processes change
# e.g. if you're [MaÚin a directory which is a git repo and you fire up Pry then
# tmux would first rename the tab to 'java' (for Pry) then 'git' when exiting Pry, then finally back to 'zsh'
set-option -g allow-rename off
# Tells tmux up front what shell to expect
set-option -g default-shell /bin/zsh
# Set base to 1
set -g base-index 1
set -g status on
# Increase scrollback lines
set -g history-limit 30000
# Renumber windows automatically after removing a window
# Prevents my OCD and means I don't have to manually run {move|swap}-window
set-option -g renumber-windows on
# Colour reference...
# Light Blue = 31
# Dark Grey = 234
# Light Grey = 240
# White = 254
# sets right side of the status bar to look bit nicer
# sets status bar background colour
set -g status-bg white
# positions each window name to the left most edge of the status bar
set -g status-justify 'left'
# sets default pane border colour
set -g pane-border-style "fg=white"
# highlights border o[MaÚf current pane
set -g pane-active-border "fg=red"
# sets status bar background colour when executing a command via command-line mode
set -g message-style "bg=red"
# sets colour of status bar font in command-line mode
set -g message-style "fg=white"
# adds separator (in this case some extra breathing space around the list of windows)
setw -g window-status-separator ' '
# sets design of current window listed in the status bar
# Explanation of settings I don't use...
#
# sets background colour of status bar when you try to ESC command-line mode:
# set -g message-command-bg 'colour31'
#
# sets colour of status bar font in default mode:
# setw -g window-status-fg black
#
# sets the background colour of the window listed in the status bar:
# setw -g window-status-bg 'colour234'
#
# sets default design around each window listed in the status bar:
# setw -g window-status-format '#[fg=colour234,bg=colour234,nobold,nounderscore,noitalics]<U+E0B0>#[default] #I <U+E0B1> #W #[fg=colour234,bg=colour234,nobold,nounderscore,noitalics]<U+E0B0>'
#
# sets left side information of status bar:
# set -g status-left '#[fg=colour16,bg=colour254,bold] #S #[fg=colour254,bg=colour240,nobold,nounderscore,noitalics]<U+E0B0>#[fg=colour237,bg=colour240] #F #[fg=colour240,bg=colour236,nobold,nounderscore,noitalics]<U+E0B0>#[fg=colour247,bg=colour236] #W #[fg=colour236,bg=colour234,nobold,nounderscore,noitalics]<U+E0B0>'
# }}}

# statusbar settings - adopted from tmuxline.vim and vim-airline - Theme: murmur
set -g status-justify "left"
set -g status "on"
set -g status-left-style "none"
set -g message-command-style "fg=colour144,bg=colour237"
set -g status-right-style "none"
set -g pane-active-border-style "fg=colour27"
set -g status-style "bg=colour234,none"
set -g message-style "fg=colour144,bg=colour237"
set -g pane-border-style "fg=colour237"
set -g status-right-length "100"
set -g status-left-length "100"
setw -g window-status-activity-style "fg=colour27,bg=colour234"
setw -g window-status-separator ""
setw -g window-status-style "fg=colour39,bg=colour234,none"
set -g status-left "#[fg=colour15,bg=colour27] #S #[fg=colour27,bg=colour234,nobold,nounderscore,noitalics]│"
set -g status-right "#(tmux-applet) #[fg=colour237,bg=colour234,nobold,nounderscore,noitalics]|#[fg=colour144,bg=colour237] %H:%M #[fg=colour27,bg=colour237,nobold,nounderscore,noitalics]|#[fg=colour15,bg=colour27] #h "
setw -g window-status-format "#[fg=colour39,dim,bg=colour234] #I ₌#[fg=colour39,bg=colour234] #W#F "
setw -g window-status-current-format "#[fg=colour144,bold,bg=colour237] #I ₌#[fg=colour144,bg=colour237] #W#F "


set -g mouse on
#set -g mode-mouse off
#set -g mouse-resize-pane on
#set -g mouse-select-pane on
#set -g mouse-select-window on

set -g pane-active-border-style "bg=default,fg=colour32"
set -g pane-border-style "bg=default,fg=default"

# Preventing tmux lockups when lots of text is printed
# Not needed for tmux 2.1 and newer
#setw -g c0-change-trigger  10
#setw -g c0-change-interval 250 

#set-window-option -g window-style 'bg=#181818'
#set-window-option -g window-active-style 'bg=black'

# view current pane history (including colors) with "less" in new window
# bind-key u capture-pane -S - -E - -e -b lesshist \; new-window -n "history" 'tmux show-buffer -b lesshist| less -R +G'

# displays "prefix" (in red) in statusline when prefix is pressed
# set -g status-left "#[bg=red]#{s/root//:client_key_table}"

# Creates a new window right after the current one
bind c new-window -ac "#{pane_current_path}"

# Use Alt-arrow keys without prefix key to switch panes
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Vim style bindings for pane movement
# bind-key -r h select-pane -L
# bind-key -r j select-pane -D
# bind-key -r k select-pane -U
# bind-key -r l select-pane -R

# Shift + arrow keys to switch windows
bind -n S-Left  previous-window
bind -n S-Right next-window

